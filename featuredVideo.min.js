/*!
* Featured Video v1.0.2 (http://okize.github.com/)
* Copyright (c) 2013 | Licensed under the MIT license - http://www.opensource.org/licenses/mit-license.php
*/
(function(i){"function"==typeof define&&define.amd?define(["jquery"],i):i(jQuery)})(function(i){"use strict";var t="featuredVideo",e={autoplayFirstVideo:!0,supportsDeepLinking:!0,showPlaylist:!0,showPlaylistTooltips:!0,tooltipHtml:'<div class="featuredVideoPlaylistTooltip"></div>'},o=function(t,o){this.el=t,this.options=i.extend({},e,o),this.init()};o.prototype={init:function(){return this.$element=i(this.el),this.activeVideoId=0,this.hashVideoId=this.getVideoIdFromUrl(),this.player=this.$element.find(".featuredplayer"),this.playlist=this.$element.find(".featuredVideoPlaylist"),this.playlistVideos=this.playlist.find("li"),this.playlistVideosCount=this.playlistVideos.length,this.playlistFirstVideoId=this.playlistVideos.eq(0).data("videoId"),0>=this.playlistVideosCount||1===this.playlistVideosCount&&""===this.playlistFirstVideoId?(this.$element.hide(),i.error("no video ids specified in playlist"),void 0):(this.options.supportsDeepLinking&&this.initHashLinking(),this.getPlayer(),void 0)},player:{},getPlaylistIds:function(){var t=[];return this.playlistVideos.each(function(){var e=i(this).data("videoId");t.push(e)}),t},initHashLinking:function(){if("onhashchange"in window){var i=this;window.onhashchange=function(){i.activeVideoId=i.getVideoIdFromUrl(),i.playVideo("load",i.activeVideoId)}}},getPlayer:function(){var t={url:"http://admin.brightcove.com/js/BrightcoveExperiences.js",isLoaded:i(document).data("playerScriptLoaded")||!1},e=this,o=t.isLoaded?this.resolve():this.loadPlayerScript(t.url);i.when(o).done(function(){e.initializePlayer()}).fail(function(){i.error("Brightcove script failed to load")})},loadPlayerScript:function(t){var e=i.ajax(t,{dataType:"script"});return e},initializePlayer:function(){var i=this,t=window.brightcove||{};window.brightcovePlayerLoaded=function(e){var o=t.api.getExperience(e);i.player=o.getModule(t.api.modules.APIModules.VIDEO_PLAYER)},window.brightcovePlayerReady=function(){var t=i.options.autoplayFirstVideo?"load":"cue";i.playVideo(t,i.getVideoId()),i.initializePlaylist()},t.createExperiences()},playVideo:function(i,t){"load"===i?this.player.loadVideoByID(t):"cue"===i&&this.player.cueVideoByID(t)},getVideoId:function(i){return this.activeVideoId=i!==void 0?i.data("videoId"):this.hashVideoId?this.hashVideoId:this.playlistFirstVideoId,this.activeVideoId},getAllVideoIds:function(){var i=[];return i},activatePlaylistItem:function(i){i===void 0&&(i=this.playlist.find('li[data-video-id="'+this.getVideoId()+'"]')),this.playlistVideos.removeClass("active"),i.addClass("active")},updateUrlHash:function(i){window.location.hash="videoId="+i},initializePlaylist:function(){if(!this.options.showPlaylist)return this.playlist.remove(),this.$element.addClass("noPlaylist"),void 0;var t=this;this.activatePlaylistItem(),this.playlistVideos.on("click",function(e){e.preventDefault();var o=i(this),s=o.data("videoId");t.activatePlaylistItem(o),t.updateUrlHash(s),t.playVideo("load",s)}),this.options.showPlaylistTooltips&&this.initializePlaylistTooltips(),this.playlist.css("visibility","visible")},initializePlaylistTooltips:function(){var t=i(this.options.tooltipHtml),e=this.playlist.offset();this.$element.append(t),this.playlistVideos.on({mouseenter:function(){var o=i(this),s=o.find(".featuredVideoSummary").text(),l={top:o.offset().top-e.top};""!==s&&t.text(s).css("top",l.top).show()},mouseleave:function(){t.hide()}})},getVideoIdFromUrl:function(){var i=this.getArgsFromUrl().videoId||this.getArgsFromUrl().bctid;return i===void 0&&(i=null),i},testGetArgsFromUrl:function(){console.log("test started...");for(var i,t,e=[1982178965001,1897188942001,1871056203001,1871107119001,1834784326001,1832858263001,1832858253001,1828362629001,1785579854001,1785590334001,1785136996001,1768317771001,1766325439001,1745733539001,1730775741001,1727315889001,1711303860001,1697332157001,1677122305001,1643143173001,1643104443001,1643120878001,1643104441001,1643120880001],o=["http://localhost/featuredVideo/example/index.html#videoId=1982178965001","http://localhost/featuredVideo/example/index.html?bcpid=2117382598001&bckey=AQ~~,AAAAAFGE4wo~,g57wOIK2TXKMBHTPnffWcp0t79yQC9T_&bctid=1897188942001","http://localhost/featuredVideo/example/index.html?bcpid=2117382598001&bctid=1871056203001","http://localhost/featuredVideo/example/index.html?bctid=1871056203001","http://localhost/featuredVideo/example/index.html#bctid=1871107119001","http://localhost/featuredVideo/example/index.html?bcpid=2117382598001&bckey=AQ~~,AAAAAFGE4wo~,g57wOIK2TXKMBHTPnffWcp0t79yQC9T_&bctid=1897188942001#videoId=1832858263001"],s=0,l=o.length;l>s;s++)i=this.getArgsFromUrl(o[s]).videoId||this.getArgsFromUrl(o[s]).bctid,t=i!==void 0&&i===""+e[s]?"pass":"fail",console.log("test #"+(s+1)+" -> "+t);console.log("test complete!")},getArgsFromUrl:function(i){i=i||window.location.href;for(var t={},e=i.slice(i.indexOf("#")+1).split("&"),o=0,s=e.length;s>o;o++){var l=e[o].split("=");t[l[0]]=l.length>1?l[1]:null}return t}},i.fn[t]=function(e){return this.each(function(){i.data(this,"plugin_"+t)||i.data(this,"plugin_"+t,new o(this,e))})}});
//@ sourceMappingURL=featuredVideo.min.js.map